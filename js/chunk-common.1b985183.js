"use strict";(self["webpackChunkbook_of_ideas"]=self["webpackChunkbook_of_ideas"]||[]).push([[64],{3602:(e,l,a)=>{a.d(l,{E3:()=>J,iE:()=>Y,jt:()=>$,WT:()=>M,px:()=>X,fj:()=>G,MI:()=>z});a(246);var i=a(3673);(0,i.dD)("data-v-eb2fd2d8");const o=(0,i._)("div",{class:"text-h6"},"New list",-1);function n(e,l,a,n,t,d){const r=(0,i.up)("q-card-section"),s=(0,i.up)("q-input"),u=(0,i.up)("q-btn"),c=(0,i.up)("q-card-actions"),p=(0,i.up)("q-card"),m=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(m,{ref:"dialogRef",onHide:n.onDialogHide},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"q-dialog-plugin wider-card"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[o])),_:1}),(0,i.Wm)(r,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{ref:"nameRef",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.name=e),label:"Name",autofocus:"",hint:"Required",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),(0,i.Wm)(s,{ref:"descriptionRef",modelValue:n.description,"onUpdate:modelValue":l[1]||(l[1]=e=>n.description=e),label:"Description",type:"textarea",rows:"4",hint:"Required",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])),_:1}),(0,i.Wm)(c,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{color:"grey",label:"Cancel",onClick:n.onDialogCancel},null,8,["onClick"]),(0,i.Wm)(u,{color:"primary",label:"OK",onClick:n.onSubmit},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}(0,i.Cn)();a(71);var t=a(1959),d=a(1701);const r={props:{list:{type:Object,optional:!0,default:()=>({})}},emits:[...d.Z.emits],setup(e){var l,a;const{dialogRef:i,onDialogHide:o,onDialogOK:n,onDialogCancel:r}=(0,d.Z)(),s=(0,t.Vh)(e,"list").value,u=(0,t.iH)(null!==(l=null===s||void 0===s?void 0:s.name)&&void 0!==l?l:""),c=(0,t.iH)(null),p=(0,t.iH)(null!==(a=null===s||void 0===s?void 0:s.description)&&void 0!==a?a:""),m=(0,t.iH)(null),g=()=>{const e={name:u.value,description:p.value,id:null===s||void 0===s?void 0:s.id,items:null===s||void 0===s?void 0:s.items};n(e)},f=()=>{c.value.validate(),m.value.validate(),c.value.hasError||m.value.hasError||g()};return{dialogRef:i,onDialogHide:o,onDialogCancel:r,onSubmit:f,name:u,nameRef:c,description:p,descriptionRef:m}}};var s=a(1477),u=a(151),c=a(5589),p=a(2426),m=a(9367),g=a(8240),f=a(7518),v=a.n(f);r.render=n,r.__scopeId="data-v-eb2fd2d8";const w=r;v()(r,"components",{QDialog:s.Z,QCard:u.Z,QCardSection:c.Z,QInput:p.Z,QCardActions:m.Z,QBtn:g.Z});var C=a(8880);(0,i.dD)("data-v-13cc9736");const q=(0,i._)("div",{class:"absolute-full flex flex-center bg-negative text-white"}," Cannot load image ",-1),b=(0,i._)("div",{class:"text-h6"},"New idea",-1);function _(e,l,a,o,n,t){const d=(0,i.up)("q-img"),r=(0,i.up)("q-slide-transition"),s=(0,i.up)("q-card-section"),u=(0,i.up)("q-input"),c=(0,i.up)("q-option-group"),p=(0,i.up)("q-icon"),m=(0,i.up)("q-file"),g=(0,i.up)("q-btn"),f=(0,i.up)("q-card-actions"),v=(0,i.up)("q-card"),w=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(w,{ref:"dialogRef",onHide:o.onDialogHide},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"q-dialog-plugin wider-card"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(d,{src:o.picLink,class:"short-image",fit:"cover"},{error:(0,i.w5)((()=>[q])),_:1},8,["src"]),[[C.F8,o.picLink]])])),_:1}),(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[b])),_:1}),(0,i.Wm)(s,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{ref:"nameRef",modelValue:o.name,"onUpdate:modelValue":l[0]||(l[0]=e=>o.name=e),label:"Name",autofocus:"",hint:"Required",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),(0,i.Wm)(u,{ref:"descriptionRef",modelValue:o.description,"onUpdate:modelValue":l[1]||(l[1]=e=>o.description=e),label:"Description",type:"textarea",rows:"4",hint:"Required",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),(0,i.Wm)(u,{ref:"urlRef",modelValue:o.url,"onUpdate:modelValue":l[2]||(l[2]=e=>o.url=e),label:"Idea URL",hint:"Required",type:"url",rules:[e=>!!e||"Field is required",e=>o.isValidUrl(e)||"Must be a valid URL"]},null,8,["modelValue","rules"]),(0,i.Wm)(c,{modelValue:o.picSource,"onUpdate:modelValue":l[3]||(l[3]=e=>o.picSource=e),class:"q-pt-md",dense:"",inline:"",options:[{label:"Online image",value:"url"},{label:"Upload image",value:"upload"},{label:"No image",value:"none"}],color:"primary"},null,8,["modelValue"]),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(u,{ref:"picUrlRef",modelValue:o.picUrl,"onUpdate:modelValue":l[4]||(l[4]=e=>o.picUrl=e),label:"Picture URL",clearable:"","clear-icon":"close",rules:[e=>!e||o.isValidUrl(e)||"Must be a valid URL"]},null,8,["modelValue","rules"]),[[C.F8,"url"===o.picSource]])])),_:1}),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>["upload"===o.picSource?((0,i.wg)(),(0,i.j4)(m,{key:0,ref:"picFileRef",modelValue:o.picFile,"onUpdate:modelValue":l[5]||(l[5]=e=>o.picFile=e),label:"Picture",accept:"image/*",clearable:"","clear-icon":"close"},{before:(0,i.w5)((()=>[(0,i.Wm)(p,{name:"file_upload"})])),_:1},8,["modelValue"])):(0,i.kq)("",!0)])),_:1})])),_:1}),(0,i.Wm)(f,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{color:"grey",label:"Cancel",onClick:o.onDialogCancel},null,8,["onClick"]),(0,i.Wm)(g,{color:"primary",label:"OK",onClick:o.onSubmit},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}(0,i.Cn)();a(7965);var h=a(1325);const k={emits:[...d.Z.emits],setup(e){const{dialogRef:l,onDialogHide:a,onDialogOK:i,onDialogCancel:o}=(0,d.Z)(),n=(0,t.iH)(""),r=(0,t.iH)(null),s=(0,t.iH)(""),u=(0,t.iH)(null),c=(0,t.iH)(""),p=(0,t.iH)(null),m=(0,t.iH)(""),g=(0,t.iH)(null),f=(0,t.iH)(null),v=(0,t.iH)(null),w=(0,t.iH)("none"),C=(0,t.Fl)((()=>"none"===w.value?"":"url"===w.value?m.value:"upload"===w.value&&f.value?URL.createObjectURL(f.value):null)),q=()=>{const e={name:n.value,description:s.value,url:c.value,picUrl:"url"===w.value?m.value:"",picFile:"upload"===w.value?f.value:null};i(e)},b=()=>{r.value.validate(),u.value.validate(),p.value.validate(),r.value.hasError||u.value.hasError||p.value.hasError||q()};return{dialogRef:l,onDialogHide:a,onDialogCancel:o,onSubmit:b,name:n,nameRef:r,description:s,descriptionRef:u,url:c,urlRef:p,picSource:w,picUrl:m,picUrlRef:g,picFile:f,picFileRef:v,isValidUrl:h.j,picLink:C}}};var D=a(2471),R=a(4027),W=a(7011),Z=a(4816),H=a(4554);k.render=_,k.__scopeId="data-v-13cc9736";const y=k;v()(k,"components",{QDialog:s.Z,QCard:u.Z,QSlideTransition:D.Z,QImg:R.Z,QCardSection:c.Z,QInput:p.Z,QOptionGroup:W.Z,QFile:Z.Z,QIcon:H.Z,QCardActions:m.Z,QBtn:g.Z});var V=a(2323);(0,i.dD)("data-v-3674c93a");const I=(0,i._)("div",{class:"absolute-full flex flex-center bg-negative text-white"}," Cannot load image ",-1),Q={class:"text-h6"};function U(e,l,a,o,n,t){const d=(0,i.up)("q-img"),r=(0,i.up)("q-slide-transition"),s=(0,i.up)("q-icon"),u=(0,i.up)("q-card-section"),c=(0,i.up)("q-btn"),p=(0,i.up)("q-card-actions"),m=(0,i.up)("q-card"),g=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(g,{ref:"dialogRef",onHide:o.onDialogHide},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"q-dialog-plugin wider-card"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[""!=o.picUrl?((0,i.wg)(),(0,i.j4)(d,{key:0,src:o.picUrl,height:"250px",fit:"cover"},{error:(0,i.w5)((()=>[I])),_:1},8,["src"])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i._)("div",Q,[a.idea.starred?((0,i.wg)(),(0,i.j4)(s,{key:0,class:"q-pr-md align-baseline",name:"star",color:"amber"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,V.zw)(a.idea.name),1)])])),_:1}),(0,i.Wm)(u,{class:"q-pt-none"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.linesToArray(a.idea.description),(e=>((0,i.wg)(),(0,i.iD)("p",{key:e},(0,V.zw)(e),1)))),128))])),_:1}),(0,i.Wm)(p,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{type:"a",color:"primary",label:"Go there!",icon:"launch",href:a.idea.url,target:"_blank"},null,8,["href"])])),_:1})])),_:1})])),_:1},8,["onHide"])}(0,i.Cn)();var O=a(7874),S=a(3437);const x={props:{idea:{type:Object,default:()=>({name:"Idea",description:"",starred:!1})}},emits:[...d.Z.emits],setup(e){const{dialogRef:l,onDialogHide:a,onDialogOK:i,onDialogCancel:o}=(0,d.Z)(),n=(0,O.oR)(),r=(0,t.Vh)(e,"idea"),s=(0,t.Fl)((()=>n.getters["images/getImageSrc"](r.value.id)));return{dialogRef:l,onDialogHide:a,picUrl:s,onOKClick:i,openURL:S.Z,linesToArray:h.X}}};x.render=U,x.__scopeId="data-v-3674c93a";const F=x;v()(x,"components",{QDialog:s.Z,QCard:u.Z,QSlideTransition:D.Z,QImg:R.Z,QCardSection:c.Z,QIcon:H.Z,QCardActions:m.Z,QBtn:g.Z}),(0,i.dD)("data-v-5250d366");const L=(0,i._)("div",{class:"text-h6"},"Manage items",-1),j={class:"list-group-item"},K={class:"text-content"};function N(e,l,a,o,n,t){const d=(0,i.up)("q-card-section"),r=(0,i.up)("q-icon"),s=(0,i.up)("q-btn"),u=(0,i.up)("draggable"),c=(0,i.up)("q-card-actions"),p=(0,i.up)("q-card"),m=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(m,{ref:"dialogRef",onHide:o.onDialogHide},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"q-dialog-plugin wider-card"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[L])),_:1}),(0,i.Wm)(d,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,(0,i.dG)({modelValue:o.listItems,"onUpdate:modelValue":l[0]||(l[0]=e=>o.listItems=e),class:"list-group",tag:"transition-group","component-data":{tag:"ul",type:"transition-group",name:o.drag?null:"flip-list"}},o.dragOptions,{"item-key":"id",onStart:l[1]||(l[1]=e=>o.drag=!0),onEnd:l[2]||(l[2]=e=>o.drag=!1)}),{item:(0,i.w5)((({element:e})=>[(0,i._)("li",j,[(0,i.Wm)(r,{name:"drag_indicator",class:"handle"}),(0,i._)("span",K,(0,V.zw)(e.name),1),(0,i.Wm)(s,{flat:"",round:"",size:"xs",class:"close",onClick:l=>o.openIdeaDelete(e)},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{name:"close"})])),_:2},1032,["onClick"])])])),_:1},16,["modelValue","component-data"])])),_:1}),(0,i.Wm)(c,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{color:"grey",label:"Cancel",onClick:o.onCancelClick},null,8,["onClick"]),(0,i.Wm)(s,{color:"primary",label:"OK",onClick:o.onOKClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}(0,i.Cn)();var E=a(8825),P=a(470),A=a.n(P);const B={components:{draggable:A()},props:{listId:{type:String,default:""}},emits:[...d.Z.emits],setup(e){const{dialogRef:l,onDialogHide:a,onDialogOK:i,onDialogCancel:o}=(0,d.Z)(),n=(0,E.Z)(),r=(0,O.oR)(),s=(0,t.Vh)(e,"listId").value,u=r.getters["main/findListById"](s),c=(0,t.iH)(u.items),p=()=>{i({newOrder:c.value})},m=e=>{J(n,s,e,r)},g=(0,t.Fl)((()=>({animation:200,group:"description",disabled:!1,ghostClass:"ghost"})));return{dialogRef:l,onDialogHide:a,onOKClick:p,onCancelClick:o,openIdeaDelete:m,listItems:c,dragOptions:g,drag:(0,t.iH)(!1)}}};B.render=N,B.__scopeId="data-v-5250d366";const T=B;v()(B,"components",{QDialog:s.Z,QCard:u.Z,QCardSection:c.Z,QIcon:H.Z,QBtn:g.Z,QCardActions:m.Z});const z=(e,l)=>{e.dialog({component:w,persistent:!0}).onOk((e=>{l.dispatch("main/addNewList",{data:e})})).onDismiss((()=>{}))},M=(e,l,a)=>{e.dialog({component:w,componentProps:{list:a},persistent:!0}).onOk((e=>{l.dispatch("main/editList",{data:e})})).onDismiss((()=>{}))},G=(e,l,a,i=!1)=>{e.dialog({component:y,persistent:!0}).onOk((e=>{a.dispatch("main/addNewIdea",{listId:l,idea:e,refreshIndex:i})})).onDismiss((()=>{}))},Y=(e,l)=>{e.dialog({component:F,componentProps:{idea:l}}).onDismiss((()=>{}))},X=(e,l,a)=>{e.dialog({component:T,componentProps:{listId:l},persistent:!0}).onOk((({newOrder:e})=>{a.dispatch("main/changeListOrder",{listId:l,newOrder:e})})).onDismiss((()=>{}))},$=(e,l,a)=>new Promise((i=>{e.dialog({title:"Confirm deletion",message:"Do you really want to delete this list?",ok:{color:"negative",label:"Yes"},cancel:{color:"grey",label:"No"}}).onOk((()=>{a.dispatch("main/deleteList",{listId:l}),i(!0)})).onCancel((()=>i(!1)))})),J=(e,l,a,i)=>new Promise((o=>{e.dialog({title:"Confirm deletion",message:`Do you really want to delete ${a.name}?`,ok:{color:"negative",label:"Yes"},cancel:{color:"grey",label:"No"}}).onOk((()=>{i.dispatch("main/deleteIdea",{listId:l,ideaId:a.id}),o(!0)})).onCancel((()=>o(!1)))}))},1325:(e,l,a)=>{a.d(l,{X:()=>i,j:()=>o});a(7280),a(71),a(7965);const i=e=>e.split("\n"),o=e=>{let l;try{l=new URL(e)}catch(a){return!1}return"http:"===l.protocol||"https:"===l.protocol}}}]);